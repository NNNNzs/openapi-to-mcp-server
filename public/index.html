<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenAPI 转 MCP Server 配置工具</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🚀 OpenAPI 转 MCP Server 配置工具</h1>
            <p class="subtitle">快速将 OpenAPI 规范转换为 MCP Server 配置文件</p>
        </header>

        <main>
            <!-- 上传区域 -->
            <section class="upload-section">
                <div class="card">
                    <h2>📁 上传 OpenAPI 规范文件</h2>
                    <form id="uploadForm">
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-icon">📄</div>
                            <p class="upload-text">点击选择文件或拖拽文件到此处</p>
                            <p class="upload-hint">支持 JSON 和 YAML 格式，最大 10MB</p>
                            <input type="file" id="fileInput" accept=".json,.yaml,.yml" hidden>
                        </div>

                        <div id="fileInfo" class="file-info" style="display: none;">
                            <div class="file-name"></div>
                            <button type="button" class="btn-remove" id="removeFile">✕</button>
                        </div>

                        <div class="form-group">
                            <label for="serverName">服务器名称</label>
                            <input 
                                type="text" 
                                id="serverName" 
                                name="serverName" 
                                placeholder="例如: petstore, payment-api"
                                value="openapi-server"
                            >
                            <small>MCP 服务器的名称标识</small>
                        </div>

                        <div class="form-group">
                            <label for="toolPrefix">工具名称前缀（可选）</label>
                            <input 
                                type="text" 
                                id="toolPrefix" 
                                name="toolPrefix" 
                                placeholder="例如: api_, tool_"
                            >
                            <small>为所有工具添加统一前缀</small>
                        </div>

                        <div class="form-group">
                            <label for="format">输出格式</label>
                            <select id="format" name="format">
                                <option value="yaml" selected>YAML</option>
                                <option value="json">JSON</option>
                            </select>
                        </div>

                        <div class="form-group checkbox-group">
                            <label>
                                <input type="checkbox" id="validate" name="validate">
                                <span>验证 OpenAPI 规范</span>
                            </label>
                            <small>启用严格的规范验证</small>
                        </div>

                        <button type="submit" class="btn-primary" id="convertBtn">
                            <span class="btn-text">🔄 开始转换</span>
                            <span class="btn-loading" style="display: none;">
                                <span class="spinner"></span> 转换中...
                            </span>
                        </button>
                    </form>
                </div>
            </section>

            <!-- 结果区域 -->
            <section class="result-section" id="resultSection" style="display: none;">
                <div class="card">
                    <h2>✅ 转换成功</h2>
                    
                    <div class="result-actions">
                        <button class="btn-secondary" id="downloadBtn">
                            📥 下载配置文件
                        </button>
                        <button class="btn-secondary" id="copyBtn">
                            📋 复制到剪贴板
                        </button>
                    </div>

                    <div class="code-preview">
                        <div class="code-header">
                            <span id="previewTitle">mcp-config.yaml</span>
                            <span class="code-lang" id="codeLang">YAML</span>
                        </div>
                        <pre><code id="resultCode"></code></pre>
                    </div>
                </div>
            </section>

            <!-- 错误提示 -->
            <div id="errorMessage" class="error-message" style="display: none;"></div>
            <div id="successMessage" class="success-message" style="display: none;"></div>
        </main>

        <footer>
            <div class="usage-guide">
                <h3>💡 使用说明</h3>
                <ol>
                    <li>上传符合 OpenAPI 3.0 规范的 JSON 或 YAML 文件</li>
                    <li>配置转换参数（服务器名称、前缀等）</li>
                    <li>点击"开始转换"按钮</li>
                    <li>下载生成的 MCP Server 配置文件</li>
                </ol>
                
                <div class="reference">
                    <p>📚 参考文档: <a href="https://higress.ai/blog/bulk-conversion-of-existing-openapi-to-mcp-server" target="_blank">批量转换 OpenAPI 到 MCP Server</a></p>
                </div>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>


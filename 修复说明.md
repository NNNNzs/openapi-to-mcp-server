# 🔧 版本修复说明

## 问题描述

部署时遇到 Go 版本不兼容错误：
```
github.com/higress-group/openapi-to-mcpserver@v0.0.0-20251028033606-bb4b47825c08 
requires go >= 1.23.0 (running go 1.21.13; GOTOOLCHAIN=local)
```

## 根本原因

`openapi-to-mcp` 工具最新版本要求 **Go 1.23.0 或更高版本**，但项目配置使用的是 Go 1.21。

## 已修复的文件

✅ 已更新以下文件中的 Go 版本要求：

1. **Dockerfile** - 主要修复
   - `FROM golang:1.21-alpine` → `FROM golang:1.23-alpine`

2. **文档更新**
   - README.md
   - 快速开始指南.md
   - 项目结构说明.md
   - 项目完成总结.md

3. **脚本更新**
   - scripts/install-go-tool.sh

## 现在可以正常部署了

### 方式一：使用 Docker（推荐，无需本地 Go 环境）

```bash
# 构建镜像
docker build -t openapi-to-mcp-server .

# 或使用 Docker Compose
docker-compose up -d
```

### 方式二：本地运行（需要 Go 1.23+）

```bash
# 1. 确保安装了 Go 1.23+
go version  # 应该显示 go1.23.x 或更高

# 2. 安装 Go 工具
bash scripts/install-go-tool.sh

# 3. 启动服务
npm install
npm start
```

## 升级 Go 版本（如果需要）

### macOS
```bash
brew update
brew upgrade go
```

### Linux
访问 https://golang.org/dl/ 下载最新版本

### Windows
访问 https://golang.org/dl/ 下载最新版本

### 验证版本
```bash
go version
# 应该显示: go version go1.23.x ...
```

## GitHub Actions 部署

现在可以正常推送代码触发自动部署：

```bash
# 提交修复
git add .
git commit -m "fix: update Go version to 1.23 for compatibility"
git push origin main

# 或创建 Release 触发发布
npm run release:patch
```

## 验证修复

部署成功后，镜像会包含正确版本的 Go 工具，可以正常执行转换操作。

---

**修复时间**: 2025-10-28
**影响范围**: Docker 构建和本地开发环境
**修复状态**: ✅ 已完成

